"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var s,i,n,o,a=[],l=!0,c=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(s=n.call(r)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0,i=function(){};return{s:i,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,n=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_toPropertyKey(s.key),s)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=_typeof(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,s=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;r=Reflect.construct(s,arguments,i)}else r=s.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var MsLmsCourses=function(){_inherits(t,elementorModules.frontend.handlers.Base);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"getDefaultSettings",value:function(){return{selectors:{container:".ms_lms_courses_archive",containerGrid:".ms_lms_courses_grid",containerCarousel:".ms_lms_courses_carousel",sliderContainer:".ms_lms_courses_card_wrapper",sorting:".ms_lms_courses_archive__sorting",sortingGrid:".ms_lms_courses_grid__sorting",sortingCarousel:".ms_lms_courses_carousel__sorting",sortingSelect:".ms_lms_courses_archive__sorting_select",sortingSelectGrid:".ms_lms_courses_grid__sorting_select",sortingSelectCarousel:".ms_lms_courses_carousel__sorting_select",dropdownSelect:".ms_lms_courses_archive__sorting.style_3",dropdownSelectGrid:".ms_lms_courses_grid__sorting.style_3",dropdownSelectCarousel:".ms_lms_courses_carousel__sorting.style_3",sortingButton:".ms_lms_courses_archive__sorting_button",sortingButtonGrid:".ms_lms_courses_grid__sorting_button",sortingButtonCarousel:".ms_lms_courses_carousel__sorting_button",sortingButtonActive:".ms_lms_courses_archive__sorting_button.active",sortingButtonActiveGrid:".ms_lms_courses_grid__sorting_button.active",sortingButtonActiveCarousel:".ms_lms_courses_carousel__sorting_button.active",filter:".ms_lms_courses_archive__filter",filterTitle:".ms_lms_courses_archive__filter_options_item_title",filterToggle:".ms_lms_courses_archive__filter_toggle",showMoreInstructors:".ms_lms_courses_archive__filter_options_item_show-instructors",filterSubmit:".ms_lms_courses_archive__filter_actions_button",filterReset:".ms_lms_courses_archive__filter_actions_reset",filterForm:".ms_lms_courses_archive__filter_form",paginationItem:".ms_lms_courses_archive__pagination_list_item",paginationItemGrid:".ms_lms_courses_grid__pagination_list_item",paginationContainer:".ms_lms_courses_archive__pagination_wrapper",paginationContainerGrid:".ms_lms_courses_grid__pagination_wrapper",coursesContainer:".ms_lms_courses_card:not(.featured)"}}}},{key:"getDefaultElements",value:function(){var e=this.getSettings("selectors"),t=this.getElementSettings();return{$container:this.$element.find(e.container),$containerGrid:this.$element.find(e.containerGrid),$containerCarousel:this.$element.find(e.containerCarousel),$sliderContainer:this.$element.find(e.sliderContainer),$sorting:this.$element.find(e.sorting),$sortingGrid:this.$element.find(e.sortingGrid),$sortingCarousel:this.$element.find(e.sortingCarousel),$sortingSelect:this.$element.find(e.sortingSelect),$sortingSelectGrid:this.$element.find(e.sortingSelectGrid),$sortingSelectCarousel:this.$element.find(e.sortingSelectCarousel),$dropdownSelect:this.$element.find(e.dropdownSelect),$dropdownSelectGrid:this.$element.find(e.dropdownSelectGrid),$dropdownSelectCarousel:this.$element.find(e.dropdownSelectCarousel),$sortingButton:this.$element.find(e.sortingButton),$sortingButtonGrid:this.$element.find(e.sortingButtonGrid),$sortingButtonCarousel:this.$element.find(e.sortingButtonCarousel),$sortingButtonActive:this.$element.find(e.sortingButtonActive),$sortingButtonActiveGrid:this.$element.find(e.sortingButtonActiveGrid),$sortingButtonActiveCarousel:this.$element.find(e.sortingButtonActiveCarousel),$filterTitle:this.$element.find(e.filterTitle),$filterToggle:this.$element.find(e.filterToggle),$showMoreInstructors:this.$element.find(e.showMoreInstructors),$filter:this.$element.find(e.filter),$filterSubmit:this.$element.find(e.filterSubmit),$filterReset:this.$element.find(e.filterReset),$filterForm:this.$element.find(e.filterForm),$paginationItem:this.$element.find(e.paginationItem),$paginationItemGrid:this.$element.find(e.paginationItemGrid),$paginationContainer:this.$element.find(e.paginationContainer),$paginationContainerGrid:this.$element.find(e.paginationContainerGrid),$coursesContainer:this.$element.find(e.coursesContainer),$openedFilters:t.opened_filters,$sortBy:t.sort_by,$sortByCat:t.sort_by_cat,$categories:t.carousel_taxonomy,$showFeaturedBlock:t.show_featured_block,$courseCardPresets:t.course_card_presets,$paginationPresets:t.pagination_presets,$cardsToShowChoice:t.cards_to_show_choice,$cardsToShow:t.cards_to_show,$metaSlots:{card_slot_1:t.card_slot_1,card_slot_2:t.card_slot_2,card_slot_3:t.card_slot_3,popup_slot_1:t.popup_slot_1,popup_slot_2:t.popup_slot_2,popup_slot_3:t.popup_slot_3},$cardData:{show_popup:t.show_popup,show_category:t.show_category,show_excerpt:t.show_excerpt,show_progress:t.show_progress,show_divider:t.show_divider,show_rating:t.show_rating,show_price:t.show_price,show_slots:t.show_slots,show_wishlist:t.show_wishlist,status_presets:t.status_presets,status_position:t.status_position,featured_position:t.featured_position},$popupData:{popup_show_author_name:t.popup_show_author_name,popup_show_author_image:t.popup_show_author_image,popup_show_wishlist:t.popup_show_wishlist,popup_show_price:t.popup_show_price,popup_show_excerpt:t.popup_show_excerpt,popup_show_slots:t.popup_show_slots},$slidesOptions:{"100%":1,"50%":2,"33.333333%":3,"25%":4,"20%":5,"16.666666%":6},$carouselData:{slides_to_scroll:t.slides_to_scroll,slides_to_scroll_tablet:t.slides_to_scroll_tablet,slides_to_scroll_mobile:t.slides_to_scroll_mobile,autoplay:t.autoplay,loop:t.loop},$widgetType:t.type}}},{key:"bindEvents",value:function(){if(jQuery(".masterstudy-countdown").each((function(){0===jQuery(this).find(".countDays").length&&jQuery(this).countdown({timestamp:jQuery(this).data("timer")})})),window.self.document.querySelectorAll(".coming-soon-card-countdown-container").forEach((function(e){e.classList.add("smaller-container")})),this.elements.$sortingSelect.on("change",this.onSortingSelectChange.bind(this)),this.elements.$sortingSelect.select2({minimumResultsForSearch:1/0,dropdownParent:this.elements.$dropdownSelect}),this.elements.$sortingSelectGrid.on("change",this.onSortingSelectChangeGrid.bind(this)),this.elements.$sortingSelectGrid.select2({minimumResultsForSearch:1/0,dropdownParent:this.elements.$dropdownSelectGrid}),this.elements.$sortingSelectCarousel.on("change",this.onSortingSelectChangeCarousel.bind(this)),this.elements.$sortingSelectCarousel.select2({minimumResultsForSearch:1/0,dropdownParent:this.elements.$dropdownSelectCarousel}),this.elements.$sortingButton.on("click",this.onSortingButtonClick.bind(this)),this.elements.$sortingButtonGrid.on("click",this.onSortingButtonClickGrid.bind(this)),this.elements.$sortingButtonCarousel.on("click",this.onSortingButtonClickCarousel.bind(this)),this.elements.$filterTitle.on("click",this.onFilterTitleClick.bind(this)),window.matchMedia("(min-width: 1025px)").matches&&this.elements.$openedFilters>0)for(var e=0;e<this.elements.$openedFilters;e++)this.elements.$filterTitle.eq(e).trigger("click");this.elements.$filterToggle.on("click",this.onFilterToggleClick.bind(this)),this.elements.$showMoreInstructors.on("click",this.onShowMoreInstructorsClick.bind(this)),this.elements.$filterSubmit.on("click",this.onFilterSubmitClick.bind(this)),this.elements.$filterReset.on("click",this.onFilterResetClick.bind(this)),this.elements.$container.on("click",".ms_lms_courses_archive__no-result_reset",this.onFilterResetClick.bind(this)),this.elements.$container.on("click",".ms_lms_courses_archive__pagination_list_item a",this.onPaginationButtonClick.bind(this)),this.elements.$container.on("click",".ms_lms_courses_archive__load-more-button",this.onLoadMoreButtonClick.bind(this)),this.elements.$containerGrid.on("click",".ms_lms_courses_grid__pagination_list_item a",this.onPaginationButtonClickGrid.bind(this)),this.elements.$containerGrid.on("click",".ms_lms_courses_grid__load-more-button",this.onLoadMoreButtonClickGrid.bind(this)),jQuery(document).ready(this.sliderInit.bind(this))}},{key:"sliderInit",value:function(){void 0!==ms_lms_courses_archive_filter.editor&&(jQuery(".ms_lms_courses_card_wrapper").addClass("editor-visible"),jQuery(".ms_lms_courses_carousel .ms_lms_courses_card_item").addClass("editor-visible")),this.CarouselInit()}},{key:"onSortingSelectChange",value:function(e){if(void 0===ms_lms_courses_archive_filter.editor){var t=jQuery(e.currentTarget).val(),r={};location.search&&(r=this.getSearchArgs());this.filtering(t,r,1,!1)}}},{key:"onSortingSelectChangeGrid",value:function(e){if(void 0===ms_lms_courses_archive_filter.editor){var t=jQuery(e.currentTarget).val();this.filteringGrid(t,1,!1)}}},{key:"onSortingSelectChangeCarousel",value:function(e){if(void 0===ms_lms_courses_archive_filter.editor){var t=jQuery(e.currentTarget).val();this.filteringCarousel(t)}}},{key:"onSortingButtonClick",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){jQuery(e.currentTarget).parent().siblings().find(".ms_lms_courses_archive__sorting_button").removeClass("active"),jQuery(e.currentTarget).addClass("active");var t=jQuery(e.currentTarget).data("id"),r={};location.search&&(r=this.getSearchArgs());this.filtering(t,r,1,!1)}}},{key:"onSortingButtonClickGrid",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){jQuery(e.currentTarget).parent().siblings().find(".ms_lms_courses_grid__sorting_button").removeClass("active"),jQuery(e.currentTarget).addClass("active");var t=jQuery(e.currentTarget).data("id");this.filteringGrid(t,1,!1)}}},{key:"onSortingButtonClickCarousel",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){jQuery(e.currentTarget).parent().siblings().find(".ms_lms_courses_carousel__sorting_button").removeClass("active"),jQuery(e.currentTarget).addClass("active");var t=jQuery(e.currentTarget).data("id");this.filteringCarousel(t)}}},{key:"onFilterTitleClick",value:function(e){jQuery(e.currentTarget).toggleClass("active").next().slideToggle("medium",(function(){jQuery(e.currentTarget).is(":visible")&&jQuery(e.currentTarget).css("display","flex")}))}},{key:"onFilterToggleClick",value:function(e){e.preventDefault(),this.elements.$filterForm.slideToggle("medium",(function(){jQuery(e.currentTarget).is(":visible")&&jQuery(e.currentTarget).css("display","flex")}))}},{key:"onShowMoreInstructorsClick",value:function(e){jQuery(e.currentTarget).closest(".ms_lms_courses_archive__filter_options_item_content").find(".ms_lms_courses_archive__filter_options_item_category").slideDown("medium",(function(){jQuery(e.currentTarget).is(":visible")&&jQuery(e.currentTarget).css("display","flex")})),jQuery(e.currentTarget).slideUp()}},{key:"onFilterSubmitClick",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){var t=this.getSortArgs(),r=this.getFormArgs();this.filtering(t,r,1,!1)}}},{key:"onFilterResetClick",value:function(e){e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor&&(history.replaceState({},"",location.origin+location.pathname),location.reload())}},{key:"onPaginationButtonClick",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){var t=this.getSortArgs(),r={},s=parseInt(this.elements.$paginationItem.find(".current").text());location.search&&(r=this.getSearchArgs()),jQuery(e.currentTarget).hasClass("next")||jQuery(e.currentTarget).hasClass("prev")?jQuery(e.currentTarget).hasClass("next")?(s=parseInt(jQuery(e.currentTarget).parent().siblings().find(".current").text()),s++):jQuery(e.currentTarget).hasClass("prev")&&(s=parseInt(jQuery(e.currentTarget).parent().siblings().find(".current").text()),s--):(jQuery(e.currentTarget).parent().siblings().find(".current").removeClass("current"),jQuery(e.currentTarget).addClass("current"),s=parseInt(jQuery(e.currentTarget).text())),this.filtering(t,r,s,!1)}}},{key:"onPaginationButtonClickGrid",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){var t=this.getSortArgsGrid(),r=parseInt(this.elements.$paginationItemGrid.find(".current").text());jQuery(e.currentTarget).hasClass("next")||jQuery(e.currentTarget).hasClass("prev")?jQuery(e.currentTarget).hasClass("next")?(r=parseInt(jQuery(e.currentTarget).parent().siblings().find(".current").text()),r++):jQuery(e.currentTarget).hasClass("prev")&&(r=parseInt(jQuery(e.currentTarget).parent().siblings().find(".current").text()),r--):(jQuery(e.currentTarget).parent().siblings().find(".current").removeClass("current"),jQuery(e.currentTarget).addClass("current"),r=parseInt(jQuery(e.currentTarget).text())),this.filteringGrid(t,r,!1)}}},{key:"onLoadMoreButtonClick",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){var t=this.getSortArgs(),r={};location.search&&(r=this.getSearchArgs());var s=parseInt(jQuery(e.currentTarget).data("offset"));this.filtering(t,r,1,s)}}},{key:"onLoadMoreButtonClickGrid",value:function(e){if(e.preventDefault(),void 0===ms_lms_courses_archive_filter.editor){var t=this.getSortArgsGrid(),r=parseInt(jQuery(e.currentTarget).data("offset"));this.filteringGrid(t,1,r)}}},{key:"getSortArgs",value:function(){return this.elements.$sortingSelect.length?this.elements.$sortingSelect.val():this.elements.$sortingButton.length?this.elements.$sorting.find(".active").data("id"):this.elements.$sortBy}},{key:"getSortArgsGrid",value:function(){return this.elements.$sortingSelectGrid.length?this.elements.$sortingSelectGrid.val():this.elements.$sortingButtonGrid.length?this.elements.$sortingGrid.find(".active").data("id"):this.elements.$sortBy}},{key:"getFormArgs",value:function(){if(this.elements.$filter.length){var e=this.elements.$filterForm.serializeArray(),t={terms:[],meta_query:{status:[],level:[],instructor:[],price:[],rating:0}};return e.forEach((function(e){if("rating"===e.name)t.meta_query.rating=e.value;else if("category[]"===e.name||"subcategory[]"===e.name)t.terms.push(e.value);else{var r=e.name.slice(0,-2);t.meta_query[r].push(e.value)}})),t}return{}}},{key:"getSearchArgs",value:function(){if(location.search){var e,t={terms:[],s:"",meta_query:{status:[],level:[],instructor:[],price:[],rating:0}},r=_createForOfIteratorHelper(new URLSearchParams(location.search.split("?")[1]).entries());try{for(r.s();!(e=r.n()).done;){var s=e.value;if("preview"!==s[0]&&"preview_nonce"!==s[0]&&"preview_id"!==s[0])if("rating"===s[0])t.meta_query.rating=s[1];else if("terms[]"===s[0])t.terms.push(s[1]);else if("search"===s[0])t.s=s[1];else if("sort"!==s[0]&&"current_page"!==s[0]){var i=s[0].slice(0,-2);t.meta_query[i].push(s[1])}}}catch(e){r.e(e)}finally{r.f()}return t}return{}}},{key:"filtering",value:function(e,t,r,s){var i=this,n=i.elements.$coursesContainer,o=i.elements.$paginationContainer,a=i.elements.$container,l=i.elements.$filterSubmit,c=i.elements.$filterForm;i.urlAddParams(e,t,r),jQuery.ajax({url:ms_lms_courses_archive_filter.ajax_url,type:"post",dataType:"json",data:{action:"ms_lms_courses_archive_filter",card_template:i.elements.$courseCardPresets,pagination_template:i.elements.$paginationPresets,args:t,current_page:r,offset:s,sort_by:e,cards_to_show_choice:i.elements.$cardsToShowChoice,cards_to_show:i.elements.$cardsToShow,meta_slots:i.elements.$metaSlots,card_data:i.elements.$cardData,popup_data:i.elements.$popupData,nonce:ms_lms_courses_archive_filter.nonce},beforeSend:function(){n.addClass("loading"),l.length&&l.addClass("loading").attr("disabled",!0)},success:function(e){if(!s){void 0!==i.elements.$showFeaturedBlock?n.empty():n.find(".ms_lms_courses_card_item:not(.featured)").remove(),window.matchMedia("(max-width: 1024px)").matches&&c.is(":visible")&&(a=n);var t=a.offset().top,r=jQuery(window).scrollTop()+jQuery(window).height();t>=jQuery(window).scrollTop()&&t+a.height()<=r||jQuery("html, body").animate({scrollTop:a.offset().top},500)}o.empty(),e.cards?(n.append(e.cards),e.pagination&&o.append(e.pagination)):e.no_found&&n.append(e.no_found),n.removeClass("loading"),l.length&&l.removeClass("loading").attr("disabled",!1)}})}},{key:"filteringGrid",value:function(e,t,r){var s=this.elements.$coursesContainer,i=this.elements.$paginationContainerGrid,n=this.elements.$containerGrid;jQuery.ajax({url:ms_lms_courses_archive_filter.ajax_url,type:"post",dataType:"json",data:{action:"ms_lms_courses_grid_sorting",card_template:this.elements.$courseCardPresets,pagination_template:this.elements.$paginationPresets,current_page:t,offset:r,sort_by:e,sort_by_cat:this.elements.$sortByCat,sort_by_default:this.elements.$sortBy,cards_to_show_choice:this.elements.$cardsToShowChoice,cards_to_show:this.elements.$cardsToShow,meta_slots:this.elements.$metaSlots,card_data:this.elements.$cardData,popup_data:this.elements.$popupData,nonce:ms_lms_courses_archive_filter.nonce},beforeSend:function(){s.addClass("loading")},success:function(e){if(!r){s.find(".ms_lms_courses_card_item:not(.featured)").remove();var t=n.offset().top,o=jQuery(window).scrollTop()+jQuery(window).height();t>=jQuery(window).scrollTop()&&t+n.height()<=o||jQuery("html, body").animate({scrollTop:n.offset().top},500)}i.empty(),e.cards&&(s.append(e.cards),e.pagination&&i.append(e.pagination)),s.removeClass("loading")}})}},{key:"filteringCarousel",value:function(e){var t=this;jQuery.ajax({url:ms_lms_courses_archive_filter.ajax_url,type:"post",dataType:"json",data:{action:"ms_lms_courses_carousel_sorting",card_template:t.elements.$courseCardPresets,sort_by:e,sort_by_cat:t.elements.$sortByCat,categories:t.elements.$categories,sort_by_default:t.elements.$sortBy,cards_to_show_choice:t.elements.$cardsToShowChoice,cards_to_show:t.elements.$cardsToShow,meta_slots:t.elements.$metaSlots,card_data:t.elements.$cardData,popup_data:t.elements.$popupData,widget_type:t.elements.$widgetType,nonce:ms_lms_courses_archive_filter.nonce},beforeSend:function(){t.elements.$coursesContainer.addClass("loading");var e=t.elements.$sliderContainer.closest(".elementor-widget-ms_lms_courses").data("id");document.querySelector('[data-id="'.concat(e,'"] .swiper-container')).swiper&&document.querySelector('[data-id="'.concat(e,'"] .swiper-container')).swiper.destroy()},success:function(e){t.elements.$coursesContainer.find(".ms_lms_courses_card_item:not(.featured)").remove(),e.cards&&(t.elements.$coursesContainer.append(e.cards),t.CarouselInit()),t.elements.$coursesContainer.removeClass("loading")}})}},{key:"urlAddParams",value:function(e,t,r){var s=new URLSearchParams;if(t.terms&&t.terms.forEach((function(e){s.append("terms[]",e)})),t.s&&s.append("search",t.s),t.meta_query)for(var i=function(){var e=_slicedToArray(o[n],2),t=e[0],r=e[1];r.length>0&&("rating"!==t?r.forEach((function(e){s.append(t+"[]",e)})):s.append(t,r))},n=0,o=Object.entries(t.meta_query);n<o.length;n++)i();s.append("sort",e),s.append("current_page",r),history.pushState({},null,location.origin+location.pathname+"?"+s.toString())}},{key:"CarouselInit",value:function(){var e=this,t=!1,r=e.elements.$sliderContainer.closest(".elementor-widget-ms_lms_courses").data("id"),s=document.querySelector('[data-id="'.concat(r,'"] .ms_lms_courses_card_wrapper')),i=document.querySelector('[data-id="'.concat(r,'"] .ms_lms_courses_carousel__navigation_next')),n=document.querySelector('[data-id="'.concat(r,'"] .ms_lms_courses_carousel__navigation_prev'));if(e.elements.$carouselData.autoplay&&(t={delay:2e3}),0!==e.elements.$containerCarousel.length&&void 0===ms_lms_courses_archive_filter.editor)new Swiper(s,{slidesPerView:e.elements.$slidesOptions[e.elements.$carouselData.slides_to_scroll],watchSlidesProgress:!0,breakpoints:{360:{slidesPerView:e.elements.$slidesOptions[e.elements.$carouselData.slides_to_scroll_mobile]},768:{slidesPerView:e.elements.$slidesOptions[e.elements.$carouselData.slides_to_scroll_tablet]},1025:{slidesPerView:e.elements.$slidesOptions[e.elements.$carouselData.slides_to_scroll]}},loop:e.elements.$carouselData.loop,autoplay:t,navigation:{nextEl:i,prevEl:n}})}}]),t}();jQuery(window).on("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/ms_lms_courses.default",(function(e){elementorFrontend.elementsHandler.addHandler(MsLmsCourses,{$element:e})}))}));