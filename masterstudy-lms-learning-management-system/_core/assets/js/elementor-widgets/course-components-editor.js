"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,s,i,l=[],a=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){if(t&&("object"==_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}var CourseInteractions=function(){_inherits(t,elementorModules.frontend.handlers.Base);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"getDefaultSettings",value:function(){return{selectors:{tabsItem:".masterstudy-single-course-tabs__item",tabsContainer:".masterstudy-single-course-tabs__container",faqItem:".masterstudy-single-course-faq__item",faqAnswer:".masterstudy-single-course-faq__answer",faqContainerWrapper:".masterstudy-single-course-faq__container-wrapper",curriculumToggler:".masterstudy-curriculum-list__toggler",excerptToggler:".masterstudy-curriculum-list__excerpt-toggler",disabledLink:".masterstudy-curriculum-list__link_disabled",hint:".masterstudy-hint",excerptMore:".masterstudy-single-course-excerpt__more",shareButtonTitle:".masterstudy-single-course-share-button__title",shareModal:".masterstudy-single-course-share-button-modal",shareModalClose:".masterstudy-single-course-share-button-modal__close",completeBlock:".masterstudy-single-course-complete",completeDetails:".masterstudy-single-course-complete-block__details",completeButton:".masterstudy-single-course-complete__buttons .masterstudy-button:last-child",completeClose:".masterstudy-single-course-complete__close"}}}},{key:"getDefaultElements",value:function(){var e=this,t=this.getSettings("selectors");return Object.fromEntries(Object.entries(t).map((function(t){var r=_slicedToArray(t,2),n=r[0],o=r[1];return["$".concat(n),e.$element.find(o)]})))}},{key:"bindEvents",value:function(){var e=this;this.elements.$tabsItem.on("click",this.handleTabsClick.bind(this)),this.elements.$faqItem.on("click",this.toggleFaqItem.bind(this)),this.elements.$curriculumToggler.on("click",(function(t){return e.toggleContainer(t,!0)})),this.elements.$excerptToggler.on("click",(function(t){return e.toggleContainer(t,!1)})),this.elements.$disabledLink.on("click",(function(e){return e.preventDefault()})),this.elements.$hint.hover(this.handleHintHover.bind(this),this.handleHintOut.bind(this)),this.elements.$excerptMore.on("click",this.toggleExcerpt.bind(this)),this.elements.$shareButtonTitle.on("click",this.showShareModal.bind(this)),this.elements.$shareModal.on("click",this.closeShareModal.bind(this)),this.elements.$shareModalClose.on("click",this.hideShareModal.bind(this)),this.elements.$completeDetails.on("click",this.showCompleteBlock.bind(this)),this.elements.$completeBlock.on("click",this.hideCompleteBlock.bind(this)),this.elements.$completeButton.on("click",this.hideCompleteBlock.bind(this)),this.elements.$completeClose.on("click",this.hideCompleteBlock.bind(this)),setTimeout((function(){e.elements.$shareModal.removeAttr("style"),e.elements.$completeBlock.removeAttr("style")}),1e3)}},{key:"showCompleteBlock",value:function(){jQuery("body").addClass("masterstudy-single-course-complete_hidden"),this.elements.$completeBlock.addClass("masterstudy-single-course-complete_active"),this.initCompletionProgress()}},{key:"hideCompleteBlock",value:function(){this.elements.$completeBlock.removeClass("masterstudy-single-course-complete_active"),jQuery("body").removeClass("masterstudy-single-course-complete_hidden")}},{key:"initCompletionProgress",value:function(){var e=this,t=this.elements.$completeBlock.data("course-id");jQuery.get("".concat(components_data.ajax_url,"?action=stm_lms_total_progress&course_id=").concat(t,"&nonce=").concat(components_data.nonce),(function(t){e.updateCompletionStats(t)}))}},{key:"updateCompletionStats",value:function(e){var t=this;this.elements.$completeBlock.find(".masterstudy-single-course-complete__loading").hide(),this.elements.$completeBlock.find(".masterstudy-single-course-complete__success").show(),this.elements.$completeBlock.find(".masterstudy-single-course-complete__opportunities-percent").text("".concat(e.course.progress_percent,"%")),e.title&&this.elements.$completeBlock.find("h2").show().text(e.title),["lesson","multimedia","quiz","assignment"].forEach((function(r){e.curriculum.hasOwnProperty(r)&&(t.elements.$completeBlock.find(".masterstudy-single-course-complete__curiculum-statistic-item_type-".concat(r)).addClass("show-item"),t.elements.$completeBlock.find(".masterstudy-single-course-complete__curiculum-statistic-item_type-".concat(r," .masterstudy-single-course-complete__curiculum-statistic-item_completed")).html(e.curriculum[r].completed),t.elements.$completeBlock.find(".masterstudy-single-course-complete__curiculum-statistic-item_type-".concat(r," .masterstudy-single-course-complete__curiculum-statistic-item_total")).html(e.curriculum[r].total))}))}},{key:"handleTabsClick",value:function(e){var t=jQuery(e.currentTarget),r=t.data("id");t.siblings().removeClass("masterstudy-single-course-tabs__item_active"),t.addClass("masterstudy-single-course-tabs__item_active"),this.elements.$tabsContainer.removeClass("masterstudy-single-course-tabs__container_active").filter((function(e,t){return jQuery(t).data("id")===r})).addClass("masterstudy-single-course-tabs__container_active")}},{key:"toggleFaqItem",value:function(e){var t=jQuery(e.currentTarget),r=t.find(this.getSettings("selectors").faqAnswer),n="masterstudy-single-course-faq__container-wrapper_opened";if(r.is(":visible"))r.animate({height:0},100,(function(){setTimeout((function(){r.css("display","none").css("height","")}),300)})),t.find(this.getSettings("selectors").faqContainerWrapper).removeClass(n);else{r.css("display","block");var o=r.height("auto").height();r.height(0).animate({height:o},100,(function(){setTimeout((function(){r.css("height","")}),300)})),t.find(this.getSettings("selectors").faqContainerWrapper).addClass(n)}}},{key:"toggleContainer",value:function(e,t){e.preventDefault();var r=t?jQuery(e.currentTarget).parent().next():jQuery(e.currentTarget).parent().parent().next(),n=t?"masterstudy-curriculum-list__wrapper_opened":"masterstudy-curriculum-list__container-wrapper_opened";if(r.is(":visible"))r.animate({height:0},100,(function(){setTimeout((function(){r.css("display","none").css("height","")}),300)})),jQuery(e.currentTarget).parent().parent().removeClass(n);else{r.css("display","block");var o=r.height("auto").height();r.height(0).animate({height:o},100,(function(){setTimeout((function(){r.css("height","")}),300)})),jQuery(e.currentTarget).parent().parent().addClass(n)}}},{key:"handleHintHover",value:function(e){jQuery(e.currentTarget).closest(".masterstudy-curriculum-list__materials").css("overflow","visible")}},{key:"handleHintOut",value:function(e){jQuery(e.currentTarget).closest(".masterstudy-curriculum-list__materials").css("overflow","hidden")}},{key:"toggleExcerpt",value:function(e){var t=jQuery(e.currentTarget);t.siblings(".masterstudy-single-course-excerpt__hidden").toggle(),t.siblings(".masterstudy-single-course-excerpt__continue").toggle(),t.text(t.text().trim()===components_data.more_title?components_data.less_title:components_data.more_title)}},{key:"showShareModal",value:function(){this.elements.$shareModal.addClass("masterstudy-single-course-share-button-modal_open"),jQuery("body").addClass("masterstudy-single-course-share-button-body-hidden")}},{key:"closeShareModal",value:function(e){e.target===e.currentTarget&&this.hideShareModal()}},{key:"hideShareModal",value:function(){this.elements.$shareModal.removeClass("masterstudy-single-course-share-button-modal_open"),jQuery("body").removeClass("masterstudy-single-course-share-button-body-hidden")}}]),t}();jQuery(window).on("elementor/frontend/init",(function(){var e=function(e){elementorFrontend.elementsHandler.addHandler(CourseInteractions,{$element:e})};elementorFrontend.hooks.addAction("frontend/element_ready/ms_lms_course_faq.default",e),elementorFrontend.hooks.addAction("frontend/element_ready/ms_lms_course_curriculum.default",e),elementorFrontend.hooks.addAction("frontend/element_ready/ms_lms_course_excerpt.default",e),elementorFrontend.hooks.addAction("frontend/element_ready/ms_lms_course_share_button.default",e),elementorFrontend.hooks.addAction("frontend/element_ready/ms_lms_course_complete.default",e)}));