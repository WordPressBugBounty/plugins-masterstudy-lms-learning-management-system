"use strict";!function(t){t(document).ready((function(){t(".masterstudy-authorization").each((function(){var a=t(this);a.find(".masterstudy-authorization__form-show-pass").click((function(){t(this).toggleClass("masterstudy-authorization__form-show-pass_open");var a=t(this).parent().find("input");a.attr("type","password"===a.attr("type")?"text":"password")})),a.find('[data-id="masterstudy-authorization-new-pass-button"]').click((function(n){if(n.preventDefault(),new_pass_data.token.length>0){var s={token:new_pass_data.token,new_password:t('input[name="user_new_password"]').val(),repeat_password:t('input[name="user_repeat_new_password"]').val()},e=new_pass_data.ajax_url+"?action=stm_lms_restore_password&nonce="+new_pass_data.nonce;a.find('[data-id="masterstudy-authorization-new-pass-button"]').addClass("masterstudy-button_loading"),fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(t){if(t.ok)return t.json();throw new Error("not ok")})).then((function(t){a.find('[data-id="masterstudy-authorization-new-pass-button"]').removeClass("masterstudy-button_loading"),"error"!==t.status?"success"===t.status&&location.reload():t.errors.forEach((function(t){var n=a.find('input[name="'.concat(t.field,'"]')),s='<span data-error-id="'.concat(t.id,'" class="masterstudy-authorization__form-field-error">').concat(t.text,"</span>");n.length>0&&(n.parent().addClass("masterstudy-authorization__form-field_has-error"),0===n.parent().find('span[data-error-id="'.concat(t.id,'"]')).length&&n.after(s))}))}))}}))}))}))}(jQuery);