"use strict";!function(t){t(document).ready((function(){function n(n,o,a,e){n.preventDefault();var u=t(this),s=u.data(o);if(void 0===s)return window.location=u.attr("href"),!1;t.ajax({url:masterstudy_buy_button_data.ajax_url,dataType:"json",context:u,data:{action:a,nonce:e,item_id:s},beforeSend:function(){u.find(".masterstudy-buy-button__title").addClass("masterstudy-buy-button__loading")},complete:function(t){var n=t.responseJSON;u.find(".masterstudy-buy-button__title").removeClass("masterstudy-buy-button__loading"),u.find(".masterstudy-buy-button__title").text(n.text),n.cart_url&&(n.redirect&&(window.location=n.cart_url),u.attr("href",n.cart_url),u.removeAttr("data-"+o),u.removeData(o))}})}t(".masterstudy-buy-button").each((function(){var n=t(this),o=!1;function a(n){o=!o,t(".masterstudy-buy-button").not(n).removeClass("dropdown-show"),n.toggleClass("dropdown-show",o)}n.on("click",(function(){a(n)})),n.find(".masterstudy-buy-button_plans-dropdown").on("click",(function(t){t.stopPropagation()})),n.find(".masterstudy-buy-button__link_disabled").on("click",(function(t){t.preventDefault()})),t(document).on("click",(function(e){!t(e.target).closest(n).length&&o&&a(n)}))})),t("[data-purchased-course]").on("click",(function(t){n.call(this,t,"purchased-course","stm_lms_add_to_cart",masterstudy_buy_button_data.get_nonce)})),t("[data-guest]").on("click",(function(o){n.call(this,o,"guest","stm_lms_add_to_cart_guest",masterstudy_buy_button_data.get_guest_nonce);var a=t(this).data("guest"),e=function(t){var n="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===n.length)return n.pop().split(";").shift()}("stm_lms_notauth_cart");e=e?JSON.parse(decodeURIComponent(e)):[];var u=a.toString();(e=e.map(String)).includes(u)||e.push(u),function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};document.cookie="".concat(t,"=").concat(encodeURIComponent(n),"; path=").concat(o.path)}("stm_lms_notauth_cart",JSON.stringify(e).replace(/"/g,""),{path:"/"})}))}))}(jQuery);