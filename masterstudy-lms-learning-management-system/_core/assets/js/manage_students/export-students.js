"use strict";!function(t){t(document).ready((function(){t('[data-id="export-students-to-csv"]').on("click",(function(t){t.preventDefault();var e=new URLSearchParams(window.location.search).get("course_id");if(e){var n="".concat(ms_lms_resturl,"/students/export/").concat(e);fetch(n,{method:"GET",headers:{"X-WP-Nonce":ms_lms_nonce,"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json()})).then((function(t){!function(t,e){var n,c,o,r="",a=function(t){var e,n,c,o,r;if(r=t.data||null,null==r||!r.length)return null;return c=t.columnDelimeter||",",o=t.lineDelimeter||"\r\n",n=Object.keys(r[0]),e="",e+=n.join(c),e+=o,r.forEach((function(t){n.forEach((function(n,o){o>0&&(e+=c+" "),e+=t[n]||""})),e+=o})),e}({data:e});if(null==a)return;c="course_".concat(t,"_students.csv"),a.match(/^data:text\/csv/i)||(r="data:text/csv;charset=utf-8,");n=encodeURI(r)+"\ufeff"+encodeURI(a),(o=document.createElement("a")).setAttribute("href",n),o.setAttribute("download",c),o.click()}(e,t)})).catch((function(t){throw t}))}}))}))}(jQuery);