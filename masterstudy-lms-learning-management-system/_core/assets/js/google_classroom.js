"use strict";jQuery(document).ready((function(){new Vue({el:"#stm_lms_google_classrooms",data:function(){return{loading:!1,courses:[],message:"",importInProgress:!1,currentImporting:0,loadingJson:!1,credentialJson:"",json_message:"",is_error:!1}},methods:{getCourses:function(){var s=this;s.loading=!0,s.status=s.message="";var e=stm_lms_ajaxurl+"?action=stm_lms_get_google_classroom_courses&nonce="+stm_lms_nonces.stm_lms_get_google_classroom_courses;s.$http.get(e).then((function(e){s.loading=!1,s.message=e.body.message,s.$set(s,"courses",e.body.courses),void 0!==e.body.error&&location.reload()}))},importCourse:function(s){var e=this;e.$set(s,"loading",!0);var o=stm_lms_ajaxurl+"?action=stm_lms_get_google_classroom_course&course_id="+s.course_id+"&nonce="+stm_lms_nonces.stm_lms_get_google_classroom_course;e.$http.get(o).then((function(o){e.$set(s,"loading",!1),e.$set(s,"action_links",o.body),e.importInProgress&&(e.$set(e,"currentImporting",e.currentImporting+1),e.importAll())}))},importAll:function(){var s=this;s.$set(s,"importInProgress",!0),void 0!==s.courses[s.currentImporting]?s.importCourse(s.courses[s.currentImporting]):(s.$set(s,"importInProgress",!1),s.$set(s,"currentImporting",0))},publishAll:function(){var s=this;s.$set(s,"importInProgress",!0),void 0!==s.courses[s.currentImporting]?void 0===s.courses[s.currentImporting].action_links?(s.$set(s,"currentImporting",s.currentImporting+1),s.publishAll()):s.publishCourse(s.courses[s.currentImporting]):(s.$set(s,"importInProgress",!1),s.$set(s,"currentImporting",0))},publishCourse:function(s){var e=this;e.$set(s,"loading",!0);var o=stm_lms_ajaxurl+"?action=stm_lms_get_google_classroom_publish_course&course_id="+s.course_id+"&nonce="+stm_lms_nonces.stm_lms_get_google_classroom_publish_course;e.$http.get(o).then((function(o){e.$set(s,"loading",!1),e.$set(s,"action_links",o.body),e.importInProgress&&(e.$set(e,"currentImporting",e.currentImporting+1),e.publishAll())}))},uploadCredentials:function(){var s=this,e=new FormData;e.append("file",s.credentialJson),s.loadingJson=!0,s.json_message=s.is_error="",s.$http.post(stm_lms_ajaxurl+"?action=stm_lms_g_c_load_credentials",e).then((function(e){var o=e.body;void 0!==o.error?(s.json_message=o.error,s.is_error="error"):(s.json_message=o.success,location.reload()),s.loadingJson=!1}))},previewFiles:function(){void 0!==this.$refs.credentialsJson.files[0]&&this.$set(this,"credentialJson",this.$refs.credentialsJson.files[0])}},mounted:function(){this.getCourses()}}),new Vue({el:"#stm_lms_g_c_page_demo",data:function(){return{loading:!1,pageEditUrl:"",pageUrl:""}},mounted:function(){this.checkPage()},methods:{checkPage:function(){var s=this;s.loading=!0,s.status=s.message="";var e=stm_lms_ajaxurl+"?action=stm_lms_get_g_c_get_archive_page&nonce="+stm_lms_nonces.stm_lms_get_g_c_get_archive_page;s.$http.get(e).then((function(e){s.loading=!1,s.pageEditUrl=e.body.edit_post_link,s.pageUrl=e.body.url}))}}})}));