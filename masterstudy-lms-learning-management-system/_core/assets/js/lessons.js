"use strict";!function(s){s(document).ready((function(){if(s(".stm_lms_complete_lesson").hasClass("completed")&&s(".stm-lms-lesson_navigation ").addClass("completed"),s(".stm_lms_complete_lesson").on("click",(function(t){if("true"===s(this).closest(".stm-lms-lesson_navigation_complete").attr("data-disabled"))return!1;if(t.preventDefault(),s(this).hasClass("completed"))return!1;var e=s(this).data("course"),o=s(this).data("lesson");s.ajax({url:stm_lms_ajaxurl,dataType:"json",context:this,data:{course:e,lesson:o,action:"stm_lms_complete_lesson",nonce:stm_lms_nonces.stm_lms_complete_lesson},beforeSend:function(){s(this).addClass("loading")},complete:function(t){t=t.responseJSON;s(this).removeClass("loading");var e=s(this).closest("[data-completed]").attr("data-completed"),o=s('.stm_lms_complete_lesson[data-course="'+t.course_id+'"][data-lesson="'+t.lesson_id+'"]');void 0!==e&&(s(this).closest("[data-completed]").removeClass("uncompleted").addClass("completed"),o.find("span").text(e),stmLmsExternalInitProgress()),o.addClass("completed")}})})),s(document).ready((function(){var t=s(".stm_lms_video iframe");function e(){t.each((function(){var t=s(this).width();s(this).css({height:t/1.7777+"px","min-height":t/1.7777+"px"})}))}e(),s(window).resize(e)})),s(".stm_lms_video").on("click",(function(){var t=s(this);if(t.addClass("visible"),t.hasClass("stm_lms_video__iframe")){var e=t.find("iframe");e.attr("src",e.attr("data-src"))}})),s("#stm_lms_video").length>0){var t=s("#stm_lms_video").attr("data-id"),e=0;void 0!==localStorage.getItem("video-"+t)&&(e=localStorage.getItem("video-"+t));videojs("stm_lms_video",{currentTime:3},(function(){this.currentTime(e),this.on("timeupdate",(function(){localStorage.setItem("video-"+t,this.currentTime())}))}))}}))}(jQuery);