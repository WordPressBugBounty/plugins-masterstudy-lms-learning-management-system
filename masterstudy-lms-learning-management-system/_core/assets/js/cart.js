"use strict";jQuery(document).ready((function(){new Vue({el:"#stm_lms_checkout",data:function(){return{loading:!1,message:"",status:"error",payment_code:"",stripe:"",stripe_card:"",stripe_complete:!1}},mounted:function(){},methods:{purchase_courses:function(){if(this.loading)return!1;var e=this;function t(t){e.status=t.body.status,e.message=t.body.message;var s={event_type:"order_created",payment_code:e.payment_code,url:t.body.url||""};stm_lms_print_message(s),t.body.url?window.location=t.body.url:e.loading=!1}function s(t){e.loading=!1,e.message=t.message||"An error occurred",e.status="error"}e.loading=!0,"stripe"===e.payment_code?e.stripe.createToken(e.stripe_card).then((function(r){r.error?s(r.error):e.$http.get(stm_lms_ajaxurl+"?action=stm_lms_purchase&nonce="+stm_lms_nonces.stm_lms_purchase+"&payment_code="+e.payment_code+"&token_id="+r.token.id).then(t).catch(s)})):e.$http.get(stm_lms_ajaxurl+"?action=stm_lms_purchase&nonce="+stm_lms_nonces.stm_lms_purchase+"&payment_code="+e.payment_code).then(t).catch(s)},generateStripe:function(){var e=this;Vue.nextTick((function(){e.stripe=Stripe(stripe_id);var t=e.stripe.elements();e.stripe_card=t.create("card"),e.stripe_card.mount("#stm-lms-stripe"),e.stripe_card.addEventListener("change",(function(t){e.stripe_complete=t.complete}))}))}},watch:{payment_code:function(e){"stripe"===e&&this.generateStripe()}}})}));