"use strict";!function(t){t(document).ready((function(){t(".stm_lms_start_quiz, .btn-retake").on("click",(function(){setTimeout((function(){t(".stm_lms_question_image_match__container").each((function(){0!==t(this).find("img").length?t(this).addClass("may_sort"):t(this).addClass("empty")})),t(".stm_lms_question_image_match").each((function(){var s=t(this).data("id");t(".container_"+s+".may_sort, .answer_"+s).sortable({connectWith:[".answer_"+s,".container_"+s],appendTo:document.body,helper:"clone",over:function(a,e){t(e.placeholder).closest(".answer_"+s).removeClass("empty")},out:function(a,e){var n=t(e.placeholder).closest(".answer_"+s);n.find(".stm_lms_question_image_match__match").length<2&&n.addClass("empty")},start:function(s,a){t(a.item).addClass("dragging-item"),t(a.item).parent().addClass("empty")},stop:function(s,a){t(a.item).removeClass("dragging-item")},receive:function(a,e){var n=t(this),_=t(e.sender);if(n.closest(".answer_"+s).removeClass("empty"),n.closest(".container_"+s).removeClass("empty"),setTimeout((function(){_.html().length<1&&_.closest(".answer_"+s).addClass("empty")}),0),t(this).children().length>1&&(t(e.sender).sortable("cancel"),n.hasClass("stm_lms_question_image_match__answer")&&_.hasClass("stm_lms_question_image_match__answer"))){var i=n.find(".stm_lms_question_image_match__match"),m=_.find(".stm_lms_question_image_match__match"),c=""+i.data("answer"),o=""+i.data("url"),l=""+m.data("answer"),r=""+m.data("url"),d=r.length?"image_box":"image_box empty",h='<div class="image_match_answer"><div class="'.concat(d,'">');r.length&&(h+='<img src="'.concat(r,'"/>')),h+="</div>",l.length&&(h+="<span>".concat(l,"</span>")),h+="</div>";var u=o.length?"image_box":"image_box empty",g='<div class="image_match_answer"><div class="'.concat(u,'">');o.length&&(g+='<img src="'.concat(o,'"/>')),g+="</div>",c.length&&(g+="<span>".concat(c,"</span>")),g+="</div>",i.data("answer",l),i.data("url",r),m.data("answer",c),m.data("url",o),i.html(h),m.html(g)}var v=[];(t(e.sender).hasClass("stm_lms_question_image_match__container")?n.closest(".stm_lms_question_image_match__questions").find(".answer_"+s):_.closest(".stm_lms_question_image_match__questions").find(".answer_"+s)).each((function(){var s=t(this).closest(".stm_lms_question_image_match__questions").find(".stm_lms_question_image_match__input"),a=t(this).find(".stm_lms_question_image_match__match"),e=""+a.data("answer"),n=""+a.data("url"),_=void 0!==e&&"undefined"!==e&&e.length?e:"";void 0!==n&&"undefined"!==n&&n.length&&(_+="|"+n),v.push(_);var i="[stm_lms_image_match]"+v.join("[stm_lms_sep]");s.val(i)}))}})}))}),400)}))}))}(jQuery);