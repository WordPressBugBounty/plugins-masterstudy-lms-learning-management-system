"use strict";function stm_lms_price_format(t){return t=stm_lms_price_format_number(t),t="left"===stm_lms_vars.position?stm_lms_vars.symbol+t:t+stm_lms_vars.symbol}function stm_lms_price_format_number(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+stm_lms_vars.currency_thousands)}function stm_lms_print_message(t){var e=JSON.stringify(t);try{lmsEvent.postMessage(e)}catch(t){}}function stmLmsExternalInitProgress(){var t=jQuery(".stm_lms_finish_score_popup");t.length&&(stmLmsInitProgress(),setTimeout((function(){t.addClass("active")}),2e3))}!function(t){function e(){var e=t(".pmpro_mmpu_level");if(!e.length)return!1;e.each((function(){$level=t(this),$level_checkbox=$level.find(".pmpro_level-select"),$level_checkbox.length&&($level_checkbox.hasClass("pmpro_level-select-selected")?$level.addClass("active"):$level.removeClass("active"))}))}t(document).ready((function(){t("body").on("click","#lesson_settings .mx-datepicker-popup",(function(t){t.preventDefault()})),t(".stm_lms_log_in[data-lms-modal]").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t(".stm-lms-wrapper__login").length&&(t(this).removeAttr("data-lms-modal"),t([document.documentElement,document.body]).animate({scrollTop:t(".stm-lms-wrapper__login").offset().top},300))})),t("body").on("click",".modal-close",(function(e){e.preventDefault(),t(".stm-lms-modal-login").modal("toggle")}));var o,s,a=[];function n(e){t(e).modal("toggle")}t("[data-lms-modal]").on("click",(function(e){e.preventDefault();var o=t(this).attr("data-target");if(t(o).length)n(o);else{var s=t(this).attr("data-lms-modal"),l=t(this).attr("data-lms-params");t.ajax({url:stm_lms_ajaxurl,dataType:"json",context:this,data:{action:"stm_lms_load_modal",modal:s,nonce:stm_lms_nonces.load_modal,params:l},beforeSend:function(){t(this).addClass("loading")},complete:function(e){e=e.responseJSON;t(this).addClass("modal-loaded"),t(this).removeClass("loading"),a[o]=t(e.modal).appendTo("body"),n(o)}})}})),t("[data-buy-course]").on("click",(function(e){var o=t(this).attr("data-buy-course");if(void 0===o)return window.location=t(this).attr("href"),!1;t.ajax({url:stm_lms_ajaxurl,dataType:"json",context:this,data:{action:"stm_lms_add_to_cart",nonce:stm_lms_nonces.stm_lms_add_to_cart,item_id:o},beforeSend:function(){t(this).addClass("loading")},complete:function(e){e=e.responseJSON;t(this).removeClass("loading"),t(this).find("span").text(e.text),e.cart_url&&(e.redirect&&(window.location=e.cart_url),t(this).attr("href",e.cart_url).removeAttr("data-buy-course"))}}),e.preventDefault()})),t("[data-delete-course]").on("click",(function(e){e.preventDefault();var o=t(this).data("delete-course"),s=t(this).data("delete-enterprise"),a=t(this).data("delete-guest"),n=t(this);confirm(stm_lms_vars.translate.delete)&&t.ajax({url:stm_lms_ajaxurl,dataType:"json",context:n,data:{action:"stm_lms_delete_from_cart",nonce:stm_lms_nonces.stm_lms_delete_from_cart,item_id:o,group_id:s,guest:a},beforeSend:function(){n.addClass("loading")},complete:function(e){n.removeClass("loading"),n.closest(".item_can_hide").slideUp(),a&&t.removeCookie("stm_lms_notauth_cart",{path:"/"}),location.reload()}})})),t(".stm_lms_logout").on("click",(function(e){e.preventDefault(),t.ajax({url:stm_lms_ajaxurl,dataType:"json",context:this,data:{action:"stm_lms_logout",nonce:stm_lms_nonces.stm_lms_logout},complete:function(t){t=t.responseJSON,window.location.href=t}})})),e(),o=window.location.hash,s=t('[data-target=".stm-lms-use-subscription"]'),"#membership"===o&&s.length&&(t(".stm_lms_mixed_button").addClass("active"),s.click())})),t(window).on("load",(function(){e(),t(".pmpro_level-select input").on("change",(function(){e()}))})),t(document).on("click",".stm_lms_account_dropdown",(function(t){t.stopPropagation()})),t(document).on("click",".stm_lms_account_dropdown .dropdown-menu > li > a",(function(e){e.stopPropagation(),window.location.href=t(this).attr("href")})),t(document).mouseup((function(e){var o=t(e.target).closest(".stm_lms_account_dropdown");0===o.has(e.target).length&&t(".caret").removeClass("rotate");var s=o.outerHeight(),a=o.find(".masterstudy-dropdown-menu");if(a.length>0){a.css("top",s+5+"px");var n=o.offset(),l=o.outerWidth(),r=t(window).width(),m=n.left;m<=r-(m+l)?a.css({left:"0",right:"auto"}):a.css({left:"auto",right:"0"})}}))}(jQuery);