"use strict";function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}jQuery(document).ready((function(){new Vue({el:"#stm_lms_my_course_bundles",data:function(){return{bundles:stm_lms_my_bundles.list.posts,courses:stm_lms_my_bundles.list.courses,pages:stm_lms_my_bundles.list.pages,page:1,loading:!1}},methods:{getBundles:function(){var e=this;e.loading=!0;var s=stm_lms_ajaxurl+"?action=stm_lms_get_user_bundles&nonce="+stm_lms_nonces.stm_lms_get_user_bundles+"&page="+e.page;e.$http.get(s).then((function(s){var t=s.body;e.loading=!1,e.$set(e,"bundles",t.posts),e.$set(e,"courses",t.courses),e.$set(e,"pages",t.pages)}))},bundleRating:function(e){var s=this,t={count:0,average:0,percent:0};if("object"===_typeof(e.courses))for(var n in e.courses){var o,r,u=e.courses[n];_typeof(null===(o=s.courses[u])||void 0===o?void 0:o.average)&&null!==(r=s.courses[u])&&void 0!==r&&r.percent&&(t.count++,t.average+=s.courses[u].average,t.percent+=s.courses[u].percent)}else e.courses.forEach((function(e){var n,o;_typeof(null===(n=s.courses[e])||void 0===n?void 0:n.average)&&null!==(o=s.courses[e])&&void 0!==o&&o.percent&&(t.count++,t.average+=s.courses[e].average,t.percent+=s.courses[e].percent)}));return t.count&&(t.average=(t.average/t.count).toFixed(1),t.percent=(t.percent/t.count).toFixed(1)),t},bundlePrice:function(e){var s=this,t=0;if("object"===_typeof(e.courses))for(var n in e.courses){var o=e.courses[n];s.courses[o]&&s.courses[o].simple_price&&(t+=parseFloat(s.courses[o].simple_price))}else e.courses.forEach((function(e){s.courses[e]&&s.courses[e].simple_price&&(t+=parseFloat(s.courses[e].simple_price))}));return stm_lms_price_format(t)},deleteBundle:function(e){if(!confirm("Do you really want to delete this bundle?"))return!1;var s=this;s.loading=!0;var t=stm_lms_ajaxurl+"?action=stm_lms_delete_bundle&nonce="+stm_lms_nonces.stm_lms_delete_bundle+"&bundle_id="+e.id;s.$http.get(t).then((function(e){e.body,s.getBundles()}))},changeStatusBundle:function(e){var s=this;s.loading=!0;var t=stm_lms_ajaxurl+"?action=stm_lms_change_bundle_status&nonce="+stm_lms_nonces.stm_lms_change_bundle_status+"&bundle_id="+e.id;s.$http.get(t).then((function(e){var t=e.body;"OK"!==t&&alert(t),s.getBundles()}))}}})}));